<Window
    x:Class="LibraryManager.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:LibraryManager"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="1200"
    Height="700"
    MinWidth="1000"
    MinHeight="600"
    Background="#F5F6FA"
    mc:Ignorable="d">
    <Window.Resources>
        <SolidColorBrush x:Key="PrimaryColor" Color="#2C3E50" />
        <SolidColorBrush x:Key="AccentColor" Color="#3498DB" />
        <SolidColorBrush x:Key="DangerColor" Color="#E74C3C" />
        <SolidColorBrush x:Key="SuccessColor" Color="#27AE60" />
        <SolidColorBrush x:Key="BackgroundColor" Color="#F5F6FA" />
        <SolidColorBrush x:Key="CardBackground" Color="White" />
        <Style TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentColor}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Padding" Value="15,10" />
            <Setter Property="Margin" Value="0,5" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style
            x:Key="DeleteButton"
            BasedOn="{StaticResource {x:Type Button}}"
            TargetType="Button">
            <Setter Property="Background" Value="{StaticResource DangerColor}" />
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!--  Title  -->
            <RowDefinition Height="*" />
            <!--  Content  -->
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <!--  Book list (wider)  -->
            <ColumnDefinition Width="Auto" />
            <!--  Action panel  -->
        </Grid.ColumnDefinitions>
        <!--  Title Header  -->
        <TextBlock
            Grid.Row="0"
            Grid.ColumnSpan="2"
            Margin="0,0,0,25"
            FontSize="32"
            FontWeight="Bold"
            Foreground="{StaticResource PrimaryColor}"
            Text="📚 Library Management System" />

        <!--  Book List Card  -->
        <Border
            Grid.Row="1"
            Grid.Column="0"
            Margin="15"
            Padding="0"
            Background="{StaticResource CardBackground}"
            CornerRadius="12">
            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="15"
                    Opacity="0.1"
                    ShadowDepth="2"
                    Color="#000000" />
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Book List Header  -->
                <Border
                    Grid.Row="0"
                    Padding="20,15"
                    Background="{StaticResource PrimaryColor}"
                    CornerRadius="12,12,0,0">
                    <TextBlock
                        FontSize="18"
                        FontWeight="SemiBold"
                        Foreground="White"
                        Text="Book Collection" />
                </Border>

                <!--  ListView  -->
                <ListView
                    Grid.Row="1"
                    Background="Transparent"
                    BorderThickness="0"
                    ItemsSource="{Binding Books}"
                    SelectedItem="{Binding SelectedBook}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn
                                Width="180"
                                DisplayMemberBinding="{Binding Title}"
                                Header="Title" />
                            <GridViewColumn
                                Width="150"
                                DisplayMemberBinding="{Binding Author}"
                                Header="Author" />
                            <GridViewColumn
                                Width="120"
                                DisplayMemberBinding="{Binding ISBN}"
                                Header="ISBN" />
                            <GridViewColumn
                                Width="80"
                                DisplayMemberBinding="{Binding YearPublished}"
                                Header="Year" />
                            <GridViewColumn
                                Width="80"
                                DisplayMemberBinding="{Binding IsAvailable}"
                                Header="Available" />
                            <GridViewColumn
                                Width="100"
                                DisplayMemberBinding="{Binding BorrowedDate, StringFormat='yyyy-MM-dd'}"
                                Header="Borrowed" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </Border>
        <!--  Action Panel Card  -->
        <Border
            Grid.Row="1"
            Grid.Column="1"
            Width="220"
            Margin="15"
            Padding="20"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            Background="{StaticResource CardBackground}"
            CornerRadius="12">
            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="15"
                    Opacity="0.1"
                    ShadowDepth="2"
                    Color="#000000" />
            </Border.Effect>

            <StackPanel>
                <!--  Action Panel Title  -->
                <TextBlock
                    Margin="0,0,0,15"
                    FontSize="18"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource PrimaryColor}"
                    Text="Actions" />

                <!--  Buttons  -->
                <Button Command="{Binding AddBookCommand}" Content="➕ Add Book" />

                <Button
                    Command="{Binding RemoveBookCommand}"
                    Content="🗑️ Remove Book"
                    Style="{StaticResource DeleteButton}" />

                <Button
                    Background="{StaticResource SuccessColor}"
                    Command="{Binding ToggleCheckOutCommand}"
                    Content="✅ Toggle Availablity" />

                <Button
                    Background="{StaticResource SuccessColor}"
                    Command="{Binding UpdateBookCommand}"
                    Content="✏️ Update Book" />


                <Separator Margin="0,15" Background="#E0E0E0" />

                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource PrimaryColor}"
                    Text="Filters" />

                <Button
                    Background="#95A5A6"
                    Command="{Binding GetAvailableBooksCommand}"
                    Content="📖 Available Books" />

                <Button
                    Background="#95A5A6"
                    Command="{Binding GetBorrowedBooksCommand}"
                    Content="📚 Borrowed Books" />

                <Button
                    Background="#95A5A6"
                    Command="{Binding ShowAllBooksCommand}"
                    Content="🔄 Show All" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
